<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wecome Page</title>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    rel="stylesheet"
    />
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.5.0/mdb.min.css"
    rel="stylesheet"
    />
    <script
    type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.5.0/mdb.min.js"
    ></script>

    <style>



    </style>

</head>
<body class="container" onload="checkCookie()">

    <nav class="navbar navbar-light bg-light navbar-expand-lg fixed-top">
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <span style="padding-left:40px ;" id="displayDateTime"></span>
        </div>
      </nav>


        <script type="text/javascript">
  var today = new Date();
  var day = today.getDay();
  var daylist = ["Sunday","Monday","Tuesday","Wednesday ","Thursday","Friday","Saturday"];
  var date = today.getFullYear()+' / '+(today.getMonth()+1)+' / '+today.getDate(); 
  var time = ' Time : '+ today.getHours()    + ":" + today.getMinutes();
//   var dateTime = time;
var dateTime ='DATE : '+ date+'  TIME : '+today.toLocaleString('en-US', { hour: 'numeric', hour12: true })
   
  document.getElementById("displayDateTime").innerHTML = dateTime + ' <br> DAY : ' + daylist[day];
 

//   var hours = dt.getHours()
// var minute = dt.getMinutes();
// hours = (hours % 12) || 12;
// console.log("Time is - " + hours + ":" + minute);


  </script>


<script>
    function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }
    function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
    c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
    return c.substring(name.length, c.length);
    }
    }
    return "";
    }
    function checkCookie() {
    var username = getCookie("username");
    if (username != "") {
    alert("Welcome again " + username);
    } else {
    username = prompt("Please enter your name:", "");
    if (username != "" && username != null) {
    setCookie("username", username, 100);
    }
    }
    }
    </script>

      
      
              <!-- Optional JavaScript -->
              <!-- jQuery first, then Popper.js, then Bootstrap JS -->
              <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
              <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    
    <center><div style="margin-top:100px">
        <h4 id="user" class="message"><span style="color:#DC3545;" >Hello üëãüèª</span> <email-id></Email-id></h4>
        <div class="success"><h5>Welcome to <span style="color:#DC3545;"> Q3 Car Care </span> Dashboard, You are successfully loged in!!!</h5></div><br/>
        <button class="btn btn-danger" onclick="logout()">Logout</button>
    </div></center>
<style>
    
.form-box {
  max-width: 500px;
  margin: auto;
  padding: 50px;
  background: #ffffff;
  border: 10px solid #f2f2f2;
}
</style>
<br>
<br>
   
                                    

  
    <div class="item-wrapper one">

        <div class="item">
            <div class="form-box">
                <div class="form-group ">
                    <label for="exampleFormControlInput1"> <span style="color:#DC3545;padding-top: 0px; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; font-size: 18px;">*</span> Image Name</label>
                    <input type="text" class="form-control" id="namebox" placeholder="Enter the Image Name">
        

<div>
                    <button type="button" id="select" class="btn btn-primary" > <i class="fa fa-tag"></i> Select</button>
                    <button type="button" class="btn btn-primary" data-bs-toggle="button" aria-pressed="false" id="upload" autocomplete="off"> <i class="fa fa-upload"></i> Upload</button>
                    <br>
                    <br>
                    <button type="button" class="btn btn-primary" data-bs-toggle="button" aria-pressed="false" id="retrieve" autocomplete="off"> <i class="fa fa-download"></i> Retrieve Image</button>
                </div>
                  </div>


                  <br>

                  <img style="height:100%; width:100%" id="myimg">
                  <label id="UpProgress"></label>


                  </div>
        </div><!--item-->

    </div>
    

    
    <style>

        img{
             height: auto;
             width: auto;
             border: 1px solid black;
        
        }
        
        </style>
        
        
        <!-- Firebase Libraries  -->
        
          <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
          <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-auth.js"></script>
          <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-storage.js"></script>
          <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>
        
        <script id="MainScript">
        
        // Variable Declaration Part
        var ImgName, ImgUrl;
        var files = [];
        var reader = new FileReader();
        
     
        
        // Configuration Part
        
        var firebaseConfig = {
    apiKey: "AIzaSyC7s_qvCXXzuDpk_G2VabP9J4DHckdsEJA",
    authDomain: "q3carcare-6efb7.firebaseapp.com",
    databaseURL: "https://q3carcare-6efb7-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "q3carcare-6efb7",
    storageBucket: "q3carcare-6efb7.appspot.com",
    messagingSenderId: "82800552387",
    appId: "1:82800552387:web:f5e4a0bd8377ee96fdf576",
    measurementId: "G-51XEMWDKY0"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);
        
        
        // Selection Process
        
        document.getElementById("select").onclick = function(e){
        
            var input = document.createElement("input");
            input.type='file';
            input.click();

            input.onchange = e =>{
                files = e.target.files;
                reader = new FileReader();
                reader.onload = function(){
                    document.getElementById("myimg").src = reader.result;
                }
                reader.readAsDataURL(files[0]);
            }
            input.click();
        }

//         var bytes = new Uint8Array([0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x2c, 0x20, 0x77, 0x6f, 0x72, 0x6c, 0x64, 0x21]);
// ref.put(bytes).then((snapshot) => {
//   console.log('Uploaded an array!');
// });

        // Upload Process

        document.getElementById("upload").onclick = function(){
            ImgName = document.getElementById('namebox').value;

            var uploadTask = firebase.storage().ref('Slider/'+ImgName+'.png').put(files[0]);


            uploadTask.on('state_changed', function(snapshot){
                var progress = (snapshot.bytesTransferred / snapshot.totalBytes)*100;
                
                document.getElementById('UpProgress').innerHTML = 'Upload: '+progress+'%';

            },

            // Error Handling for Firebase StorageBucket
            

            function(error){
                alert("error in saving the image");
            },


            // Submit the image link to the firebase database
           
            function(){
            uploadTask.snapshot.ref.getDownloadUrl().then(function(url){
                ImgUrl = url;

                firebase.database().ref('Picture/'+ImgName).set({
                    Name: ImgName,
                    Link: ImgUrl,
                });
                alert("Image Added Sucessfully");
                }
            );   
           });
        }


        
        </script>



    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script> -->

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-analytics.js"></script> -->
    <!-- <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script> -->


       <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>



        <!-- <script>
                    admin.initializeApp({
  credential: admin.credential.applicationDefault(),
});
        </script> -->
<!-- 
    <script src="./javascript/config.firebase.js"></script> -->
    <script src="./javascript/Dashboard.js"></script>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
</body>

</html>
